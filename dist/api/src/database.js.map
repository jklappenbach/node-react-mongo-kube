{"version":3,"sources":["../../../api/src/database.js"],"names":["config","require","mongoose","winston","dbOptions","db","native_parser","replset","auto_reconnect","poolSize","socketOptions","keepAlive","connectTimeoutMS","server","connect","connection","on","console","error","bind","once","log","module","exports"],"mappings":";;AAAA,IAAMA,SAASC,QAAQ,eAAR,CAAf;AACA,IAAMC,WAAWD,QAAQ,UAAR,CAAjB;AACA,IAAME,UAAUF,QAAQ,SAAR,CAAhB;;AAIA,IAAMG,YAAY;AAChBC,MAAI,EAACC,eAAe,IAAhB,EADY;AAEhBC,WAAS;AACPC,oBAAe,KADR;AAEPC,cAAU,EAFH;AAGPC,mBAAe;AACbC,iBAAW,IADE;AAEbC,wBAAkB;AAFL;AAHR,GAFO;AAUhBC,UAAQ;AACNJ,cAAU,CADJ;AAENC,mBAAe;AACbC,iBAAW,IADE;AAEbC,wBAAkB;AAFL;AAFT;AAVQ,CAAlB;;AAmBAV,SAASY,OAAT,CAAiBd,OAAOK,EAAxB,EAA4BD,SAA5B;AACAF,SAASa,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAgCC,QAAQC,KAAR,CAAcC,IAAd,CAAmBF,OAAnB,EAA4B,mBAA5B,CAAhC;AACAf,SAASa,UAAT,CAAoBK,IAApB,CAAyB,MAAzB,EAAiC,YAAM;AACrCjB,UAAQkB,GAAR,CAAY,MAAZ,EAAoB,mCAApB;AACD,CAFD;;AAIAC,OAAOC,OAAP,GAAiBrB,SAASa,UAA1B","file":"database.js","sourcesContent":["const config = require('./config.json');\nconst mongoose = require('mongoose');\nconst winston = require('winston');\n\n\n\nconst dbOptions = {\n  db: {native_parser: true},\n  replset: {\n    auto_reconnect:false,\n    poolSize: 10,\n    socketOptions: {\n      keepAlive: 1000,\n      connectTimeoutMS: 30000\n    }\n  },\n  server: {\n    poolSize: 5,\n    socketOptions: {\n      keepAlive: 1000,\n      connectTimeoutMS: 30000\n    }\n  }\n};\n\nmongoose.connect(config.db, dbOptions);\nmongoose.connection.on('error', console.error.bind(console, 'connection error!'));\nmongoose.connection.once('open', () => {\n  winston.log('info', 'Connected to the mongo replicaset');\n});\n\nmodule.exports = mongoose.connection;\n"]}